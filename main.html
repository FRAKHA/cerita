<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Podcast Galau</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&family=Poppins&display=swap" rel="stylesheet">
    <style>
        :root { --accent-color: #4dabf7; --accent-hover: #339af0; }
        body { margin:0; font-family:'Poppins',sans-serif; color:#fff; overflow-x:hidden; background:#0f0f0f; }
        video.bg-video { position:fixed; inset:0; width:100%; height:100%; object-fit:cover; z-index:-2; filter:blur(5px) brightness(0.6); }
        .overlay { position:fixed; inset:0; background:rgba(0,0,0,0.4); z-index:-1; }
        h1 { font-family:'Playfair Display',serif; font-size:2.5rem; text-align:center; margin-top:40px; color:var(--accent-color); transition:color .3s; }
        p.desc { text-align:center; max-width:600px; margin:10px auto 30px; font-size:1.1rem; color:#ddd; }
        .btn-container { display:flex; flex-wrap:wrap; justify-content:center; gap:12px; padding:0 15px; }
        button { padding:12px 20px; border:none; border-radius:50px; cursor:pointer; font-size:.95rem; background:rgba(255,255,255,.08); color:#fff; backdrop-filter:blur(5px); transition:all .3s; border:1px solid var(--accent-color); }
        button:hover { background:var(--accent-color); }
        #modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,.7); backdrop-filter:blur(8px); justify-content:center; align-items:center; z-index:10; animation:fadeIn .4s; }
        #modal-content { background:rgba(255,255,255,.05); padding:25px; border-radius:15px; max-width:500px; text-align:center; color:#fff; backdrop-filter:blur(10px); box-shadow:0 0 20px rgba(0,0,0,.3); animation:slideUp .5s; }
        #motivasi-text { font-size:1.2rem; margin-bottom:20px; line-height:1.6; }
        #modal button { background:var(--accent-color); border:none; padding:10px 18px; border-radius:8px; cursor:pointer; font-size:.9rem; color:#fff; }
        #modal button:hover { background:var(--accent-hover); }
        #mute-btn { position:fixed; bottom:20px; right:20px; background:rgba(255,255,255,.1); border:1px solid var(--accent-color); border-radius:50%; width:50px; height:50px; color:#fff; font-size:1.2rem; cursor:pointer; backdrop-filter:blur(5px); z-index:100; }
        @keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
        @keyframes slideUp { from{transform:translateY(20px); opacity:0;} to{transform:translateY(0); opacity:1;} }
    </style>
</head>
<body>
    <video autoplay muted loop class="bg-video">
        <source src="https://cdn.pixabay.com/vimeo/492499889/rain-65069.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>

    <audio id="bg-music" autoplay></audio>
    <button id="mute-btn">ðŸ”Š</button>

    <h1 id="welcome"></h1>
    <p class="desc">Kadang hati berat, tapi kamu nggak sendirian. Pilih kategori yang paling nyentuh hatimu sekarang.</p>

    <div class="btn-container">
        <button onclick="tampilkanMotivasi('keluarga')">Keluarga</button>
        <button onclick="tampilkanMotivasi('ekonomi')">Ekonomi</button>
        <button onclick="tampilkanMotivasi('pendidikan')">Pendidikan</button>
        <button onclick="tampilkanMotivasi('percintaan')">Percintaan</button>
        <button onclick="tampilkanMotivasi('pertemanan')">Pertemanan</button>
        <button onclick="tampilkanMotivasi('orangtua')">Orang Tua</button>
    </div>

    <div id="modal">
        <div id="modal-content">
            <p id="motivasi-text"></p>
            <button onclick="tutupModal()">Tutup</button>
        </div>
    </div>

    <!-- Muat data motivasi -->
    <script src="motivasi.js"></script>

    <script>
        // Tetap boleh pakai gender untuk nuansa warna UI (opsional)
        const gender = localStorage.getItem("genderPengguna") || "cowok";
        if (gender === "cowok") {
            document.documentElement.style.setProperty("--accent-color", "#4dabf7");
            document.documentElement.style.setProperty("--accent-hover", "#339af0");
        } else {
            document.documentElement.style.setProperty("--accent-color", "#ff5c8a");
            document.documentElement.style.setProperty("--accent-hover", "#ff3366");
        }

        // Playlist
        const playlist = [
            "audios/di_akhiri_perang.mp3",
            "audios/merindukanmu.mp3",
            "audios/miss_you.mp3",
            "audios/sampai_jadi_debu.mp3"
        ];
        let currentIndex = Math.floor(Math.random() * playlist.length);
        const audioPlayer = document.getElementById("bg-music");

        function playSong(index) {
            audioPlayer.src = playlist[index];
            audioPlayer.play().catch(() => {
                console.log("Auto-play dicegah browser, interaksi user dibutuhkan.");
            });
        }
        audioPlayer.addEventListener("ended", () => {
            currentIndex = (currentIndex + 1) % playlist.length;
            playSong(currentIndex);
        });
        window.addEventListener("load", () => playSong(currentIndex));

        // Mute
        const muteBtn = document.getElementById("mute-btn");
        let isMuted = false;
        muteBtn.addEventListener("click", () => {
            isMuted = !isMuted;
            audioPlayer.muted = isMuted;
            muteBtn.textContent = isMuted ? "ðŸ”‡" : "ðŸ”Š";
        });

        // --- Perubahan utamanya ada di sini ---
        function tampilkanMotivasi(kategori) {
            let data = motivasi[kategori];
            if (!data) return;

            // percintaan sekarang langsung array (tanpa gender)
            // kategori lain juga array
            const randomIndex = Math.floor(Math.random() * data.length);
            ketikMotivasi(data[randomIndex]);
            document.getElementById("modal").style.display = "flex";
        }

        function tutupModal() {
            document.getElementById("modal").style.display = "none";
        }

        function ketikMotivasi(text) {
            const elem = document.getElementById("motivasi-text");
            elem.innerHTML = "";
            let i = 0;
            (function ketik() {
                if (i < text.length) {
                    elem.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(ketik, 40);
                }
            })();
        }

        document.getElementById("welcome").innerText =
            "Halo, " + (localStorage.getItem("namaPengguna") || "Kamu");
    </script>
</body>
</html>
